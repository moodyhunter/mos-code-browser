<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>test_memops.c source code [MOS/tests/memops/test_memops.c] - Woboq Code Browser</title>
<link rel="stylesheet" href="/mos-code-browser/data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="/mos-code-browser/data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="/mos-code-browser/data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="/mos-code-browser/data/jquery/jquery-ui.min.js"></script>
<script>var file = 'MOS/tests/memops/test_memops.c'; var root_path = '../../..'; var data_path = '/mos-code-browser/data'; var ecma_script_api_version = 2;</script>
<script src='/mos-code-browser/data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../..'>MOS</a>/<a href='..'>tests</a>/<a href='./'>memops</a>/<a href='test_memops.c.html'>test_memops.c</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>// SPDX-License-Identifier: GPL-3.0-or-later</i></td></tr>
<tr><th id="2">2</th><td></td></tr>
<tr><th id="3">3</th><td><u>#include <a href="../../lib/include/lib/string.h.html">"lib/string.h"</a></u></td></tr>
<tr><th id="4">4</th><td><u>#include <a href="../../kernel/include/mos/mm/kmalloc.h.html">"mos/mm/kmalloc.h"</a></u></td></tr>
<tr><th id="5">5</th><td><u>#include <a href="../test_engine.h.html">"test_engine.h"</a></u></td></tr>
<tr><th id="6">6</th><td></td></tr>
<tr><th id="7">7</th><td><a class="macro" href="../test_engine_impl.h.html#54" title="static void test_lib_memcpy(mos_test_result_t *, _Bool *, _Bool *); static void __mos_test_wrapped_test_test_lib_memcpy(mos_test_result_t * result) { mos_test_engine_log(LightBlue, &apos;T&apos;, &quot;Starting test &quot; &quot;test_lib_memcpy&quot; &quot; (line %d)&quot; &quot;\n&quot;, 7); do { _Bool _mt_test_skipped = 0; _Bool _mt_loop_leave = 0; test_lib_memcpy(result, &amp;_mt_test_skipped, &amp;_mt_loop_leave); u32 total = result-&gt;n_total; u32 failed = result-&gt;n_failed; u32 skipped = result-&gt;n_skipped; u32 passed = total - failed - skipped; if (failed == 0) if (skipped == 0) mos_test_engine_log(Green, &apos;\0&apos;, &quot;%s: All %u test(s) passed&quot; &quot;\n&quot;, &quot;test_lib_memcpy&quot;, total); else mos_test_engine_log(Green, &apos;\0&apos;, &quot;%s: All %u test(s) passed (%u skipped)&quot; &quot;\n&quot;, &quot;test_lib_memcpy&quot;, total, skipped); else mos_test_engine_log(Red, &apos;X&apos;, &quot;%s: %u out of %u test(s) failed (%u passed, %u skipped)&quot; &quot;\n&quot;, &quot;test_lib_memcpy&quot;, failed, total, passed, skipped); } while (0); } const mos_test_func_t __attribute__((__section__(&quot;.mos.test_cases&quot;))) test_cases_test_lib_memcpy_L7 = { __mos_test_wrapped_test_test_lib_memcpy, &quot;test_lib_memcpy&quot; }; static void test_lib_memcpy(mos_test_result_t *_MT_result, __attribute__((__unused__)) _Bool *_mt_test_skipped, __attribute__((__unused__)) _Bool *_mt_loop_leave)" data-ref="_M/MOS_TEST_CASE">MOS_TEST_CASE</a>(<a class="decl fn" href="#7" title='test_lib_memcpy' data-ref="test_lib_memcpy" data-ref-filename="test_lib_memcpy"><a class="ref fn" href="#7" title='test_lib_memcpy' data-ref="test_lib_memcpy" data-ref-filename="test_lib_memcpy"><dfn class="decl def fn" id="test_lib_memcpy" title='test_lib_memcpy' data-ref="test_lib_memcpy" data-ref-filename="test_lib_memcpy">test_lib_memcpy</dfn></a></a>)</td></tr>
<tr><th id="8">8</th><td>{</td></tr>
<tr><th id="9">9</th><td>    <em>char</em> *<dfn class="local col1 decl" id="1src" title='src' data-type='char *' data-ref="1src" data-ref-filename="1src">src</dfn> = <a class="ref fn" href="../../kernel/include/mos/mm/kmalloc.h.html#kcalloc" title='kcalloc' data-ref="kcalloc" data-ref-filename="kcalloc">kcalloc</a>(<var>500</var>, <b>sizeof</b>(<em>char</em>));</td></tr>
<tr><th id="10">10</th><td>    <em>char</em> *<dfn class="local col2 decl" id="2dst" title='dst' data-type='char *' data-ref="2dst" data-ref-filename="2dst">dst</dfn> = <a class="ref fn" href="../../kernel/include/mos/mm/kmalloc.h.html#kcalloc" title='kcalloc' data-ref="kcalloc" data-ref-filename="kcalloc">kcalloc</a>(<var>500</var>, <b>sizeof</b>(<em>char</em>));</td></tr>
<tr><th id="11">11</th><td></td></tr>
<tr><th id="12">12</th><td>    <b>for</b> (<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col3 decl" id="3i" title='i' data-type='size_t' data-ref="3i" data-ref-filename="3i">i</dfn> = <var>0</var>; <a class="local col3 ref" href="#3i" title='i' data-ref="3i" data-ref-filename="3i">i</a> &lt; <var>500</var>; <a class="local col3 ref" href="#3i" title='i' data-ref="3i" data-ref-filename="3i">i</a>++)</td></tr>
<tr><th id="13">13</th><td>        <a class="local col1 ref" href="#1src" title='src' data-ref="1src" data-ref-filename="1src">src</a>[<a class="local col3 ref" href="#3i" title='i' data-ref="3i" data-ref-filename="3i">i</a>] = <a class="local col3 ref" href="#3i" title='i' data-ref="3i" data-ref-filename="3i">i</a>;</td></tr>
<tr><th id="14">14</th><td></td></tr>
<tr><th id="15">15</th><td>    <a class="ref fn" href="../../lib/include/lib/string.h.html#memcpy" title='memcpy' data-ref="memcpy" data-ref-filename="memcpy">memcpy</a>(<a class="local col2 ref" href="#2dst" title='dst' data-ref="2dst" data-ref-filename="2dst">dst</a>, <a class="local col1 ref" href="#1src" title='src' data-ref="1src" data-ref-filename="1src">src</a>, <var>500</var>);</td></tr>
<tr><th id="16">16</th><td></td></tr>
<tr><th id="17">17</th><td>    <b>for</b> (<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col4 decl" id="4i" title='i' data-type='size_t' data-ref="4i" data-ref-filename="4i">i</dfn> = <var>0</var>; <a class="local col4 ref" href="#4i" title='i' data-ref="4i" data-ref-filename="4i">i</a> &lt; <var>500</var>; <a class="local col4 ref" href="#4i" title='i' data-ref="4i" data-ref-filename="4i">i</a>++)</td></tr>
<tr><th id="18">18</th><td>        <a class="macro" href="../test_engine_impl.h.html#138" title="do { if ((*_mt_test_skipped)) { do { ++_MT_result-&gt;n_total; ++_MT_result-&gt;n_skipped; } while (0); break; } ++_MT_result-&gt;n_total; if ((1) != (dst[i] == src[i])) do { ++_MT_result-&gt;n_failed; mos_test_engine_log(Red, &apos;X&apos;, &quot;line %d: &quot; &quot;&apos;%s&apos; is %d, expected %d&quot; &quot;\n&quot;, 18, &quot;dst[i] == src[i]&quot;, (dst[i] == src[i]), (1)); } while (0); } while (0)" data-ref="_M/MOS_TEST_CHECK">MOS_TEST_CHECK</a>(<a class="local col2 ref" href="#2dst" title='dst' data-ref="2dst" data-ref-filename="2dst">dst</a>[<a class="local col4 ref" href="#4i" title='i' data-ref="4i" data-ref-filename="4i">i</a>] == <a class="local col1 ref" href="#1src" title='src' data-ref="1src" data-ref-filename="1src">src</a>[<a class="local col4 ref" href="#4i" title='i' data-ref="4i" data-ref-filename="4i">i</a>], <span class="macro" title="1" data-ref="_M/true">true</span>);</td></tr>
<tr><th id="19">19</th><td></td></tr>
<tr><th id="20">20</th><td>    <a class="ref fn" href="../../kernel/include/mos/mm/kmalloc.h.html#kfree" title='kfree' data-ref="kfree" data-ref-filename="kfree">kfree</a>(<a class="local col1 ref" href="#1src" title='src' data-ref="1src" data-ref-filename="1src">src</a>);</td></tr>
<tr><th id="21">21</th><td>    <a class="ref fn" href="../../kernel/include/mos/mm/kmalloc.h.html#kfree" title='kfree' data-ref="kfree" data-ref-filename="kfree">kfree</a>(<a class="local col2 ref" href="#2dst" title='dst' data-ref="2dst" data-ref-filename="2dst">dst</a>);</td></tr>
<tr><th id="22">22</th><td>}</td></tr>
<tr><th id="23">23</th><td></td></tr>
<tr><th id="24">24</th><td><a class="macro" href="../test_engine_impl.h.html#54" title="static void test_lib_memmove_simple(mos_test_result_t *, _Bool *, _Bool *); static void __mos_test_wrapped_test_test_lib_memmove_simple(mos_test_result_t * result) { mos_test_engine_log(LightBlue, &apos;T&apos;, &quot;Starting test &quot; &quot;test_lib_memmove_simple&quot; &quot; (line %d)&quot; &quot;\n&quot;, 24); do { _Bool _mt_test_skipped = 0; _Bool _mt_loop_leave = 0; test_lib_memmove_simple(result, &amp;_mt_test_skipped, &amp;_mt_loop_leave); u32 total = result-&gt;n_total; u32 failed = result-&gt;n_failed; u32 skipped = result-&gt;n_skipped; u32 passed = total - failed - skipped; if (failed == 0) if (skipped == 0) mos_test_engine_log(Green, &apos;\0&apos;, &quot;%s: All %u test(s) passed&quot; &quot;\n&quot;, &quot;test_lib_memmove_simple&quot;, total); else mos_test_engine_log(Green, &apos;\0&apos;, &quot;%s: All %u test(s) passed (%u skipped)&quot; &quot;\n&quot;, &quot;test_lib_memmove_simple&quot;, total, skipped); else mos_test_engine_log(Red, &apos;X&apos;, &quot;%s: %u out of %u test(s) failed (%u passed, %u skipped)&quot; &quot;\n&quot;, &quot;test_lib_memmove_simple&quot;, failed, total, passed, skipped); } while (0); } const mos_test_func_t __attribute__((__section__(&quot;.mos.test_cases&quot;))) test_cases_test_lib_memmove_simple_L24 = { __mos_test_wrapped_test_test_lib_memmove_simple, &quot;test_lib_memmove_simple&quot; }; static void test_lib_memmove_simple(mos_test_result_t *_MT_result, __attribute__((__unused__)) _Bool *_mt_test_skipped, __attribute__((__unused__)) _Bool *_mt_loop_leave)" data-ref="_M/MOS_TEST_CASE">MOS_TEST_CASE</a>(<a class="decl fn" href="#24" title='test_lib_memmove_simple' data-ref="test_lib_memmove_simple" data-ref-filename="test_lib_memmove_simple"><a class="ref fn" href="#24" title='test_lib_memmove_simple' data-ref="test_lib_memmove_simple" data-ref-filename="test_lib_memmove_simple"><dfn class="decl def fn" id="test_lib_memmove_simple" title='test_lib_memmove_simple' data-ref="test_lib_memmove_simple" data-ref-filename="test_lib_memmove_simple">test_lib_memmove_simple</dfn></a></a>)</td></tr>
<tr><th id="25">25</th><td>{</td></tr>
<tr><th id="26">26</th><td>    <em>char</em> *<dfn class="local col5 decl" id="5src" title='src' data-type='char *' data-ref="5src" data-ref-filename="5src">src</dfn> = <a class="ref fn" href="../../kernel/include/mos/mm/kmalloc.h.html#kcalloc" title='kcalloc' data-ref="kcalloc" data-ref-filename="kcalloc">kcalloc</a>(<var>500</var>, <b>sizeof</b>(<em>char</em>));</td></tr>
<tr><th id="27">27</th><td>    <em>char</em> *<dfn class="local col6 decl" id="6dst" title='dst' data-type='char *' data-ref="6dst" data-ref-filename="6dst">dst</dfn> = <a class="ref fn" href="../../kernel/include/mos/mm/kmalloc.h.html#kcalloc" title='kcalloc' data-ref="kcalloc" data-ref-filename="kcalloc">kcalloc</a>(<var>500</var>, <b>sizeof</b>(<em>char</em>));</td></tr>
<tr><th id="28">28</th><td></td></tr>
<tr><th id="29">29</th><td>    <b>for</b> (<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col7 decl" id="7i" title='i' data-type='size_t' data-ref="7i" data-ref-filename="7i">i</dfn> = <var>0</var>; <a class="local col7 ref" href="#7i" title='i' data-ref="7i" data-ref-filename="7i">i</a> &lt; <var>500</var>; <a class="local col7 ref" href="#7i" title='i' data-ref="7i" data-ref-filename="7i">i</a>++)</td></tr>
<tr><th id="30">30</th><td>        <a class="local col5 ref" href="#5src" title='src' data-ref="5src" data-ref-filename="5src">src</a>[<a class="local col7 ref" href="#7i" title='i' data-ref="7i" data-ref-filename="7i">i</a>] = <a class="local col7 ref" href="#7i" title='i' data-ref="7i" data-ref-filename="7i">i</a>;</td></tr>
<tr><th id="31">31</th><td></td></tr>
<tr><th id="32">32</th><td>    <a class="ref fn" href="../../lib/include/lib/string.h.html#memmove" title='memmove' data-ref="memmove" data-ref-filename="memmove">memmove</a>(<a class="local col6 ref" href="#6dst" title='dst' data-ref="6dst" data-ref-filename="6dst">dst</a>, <a class="local col5 ref" href="#5src" title='src' data-ref="5src" data-ref-filename="5src">src</a>, <var>500</var>);</td></tr>
<tr><th id="33">33</th><td>    <b>for</b> (<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col8 decl" id="8i" title='i' data-type='size_t' data-ref="8i" data-ref-filename="8i">i</dfn> = <var>0</var>; <a class="local col8 ref" href="#8i" title='i' data-ref="8i" data-ref-filename="8i">i</a> &lt; <var>500</var>; <a class="local col8 ref" href="#8i" title='i' data-ref="8i" data-ref-filename="8i">i</a>++)</td></tr>
<tr><th id="34">34</th><td>        <a class="macro" href="../test_engine_impl.h.html#138" title="do { if ((*_mt_test_skipped)) { do { ++_MT_result-&gt;n_total; ++_MT_result-&gt;n_skipped; } while (0); break; } ++_MT_result-&gt;n_total; if ((1) != (dst[i] == src[i])) do { ++_MT_result-&gt;n_failed; mos_test_engine_log(Red, &apos;X&apos;, &quot;line %d: &quot; &quot;&apos;%s&apos; is %d, expected %d&quot; &quot;\n&quot;, 34, &quot;dst[i] == src[i]&quot;, (dst[i] == src[i]), (1)); } while (0); } while (0)" data-ref="_M/MOS_TEST_CHECK">MOS_TEST_CHECK</a>(<a class="local col6 ref" href="#6dst" title='dst' data-ref="6dst" data-ref-filename="6dst">dst</a>[<a class="local col8 ref" href="#8i" title='i' data-ref="8i" data-ref-filename="8i">i</a>] == <a class="local col5 ref" href="#5src" title='src' data-ref="5src" data-ref-filename="5src">src</a>[<a class="local col8 ref" href="#8i" title='i' data-ref="8i" data-ref-filename="8i">i</a>], <span class="macro" title="1" data-ref="_M/true">true</span>);</td></tr>
<tr><th id="35">35</th><td></td></tr>
<tr><th id="36">36</th><td>    <a class="ref fn" href="../../kernel/include/mos/mm/kmalloc.h.html#kfree" title='kfree' data-ref="kfree" data-ref-filename="kfree">kfree</a>(<a class="local col5 ref" href="#5src" title='src' data-ref="5src" data-ref-filename="5src">src</a>);</td></tr>
<tr><th id="37">37</th><td>    <a class="ref fn" href="../../kernel/include/mos/mm/kmalloc.h.html#kfree" title='kfree' data-ref="kfree" data-ref-filename="kfree">kfree</a>(<a class="local col6 ref" href="#6dst" title='dst' data-ref="6dst" data-ref-filename="6dst">dst</a>);</td></tr>
<tr><th id="38">38</th><td>}</td></tr>
<tr><th id="39">39</th><td></td></tr>
<tr><th id="40">40</th><td><a class="macro" href="../test_engine_impl.h.html#54" title="static void test_memmove_overlapped(mos_test_result_t *, _Bool *, _Bool *); static void __mos_test_wrapped_test_test_memmove_overlapped(mos_test_result_t * result) { mos_test_engine_log(LightBlue, &apos;T&apos;, &quot;Starting test &quot; &quot;test_memmove_overlapped&quot; &quot; (line %d)&quot; &quot;\n&quot;, 40); do { _Bool _mt_test_skipped = 0; _Bool _mt_loop_leave = 0; test_memmove_overlapped(result, &amp;_mt_test_skipped, &amp;_mt_loop_leave); u32 total = result-&gt;n_total; u32 failed = result-&gt;n_failed; u32 skipped = result-&gt;n_skipped; u32 passed = total - failed - skipped; if (failed == 0) if (skipped == 0) mos_test_engine_log(Green, &apos;\0&apos;, &quot;%s: All %u test(s) passed&quot; &quot;\n&quot;, &quot;test_memmove_overlapped&quot;, total); else mos_test_engine_log(Green, &apos;\0&apos;, &quot;%s: All %u test(s) passed (%u skipped)&quot; &quot;\n&quot;, &quot;test_memmove_overlapped&quot;, total, skipped); else mos_test_engine_log(Red, &apos;X&apos;, &quot;%s: %u out of %u test(s) failed (%u passed, %u skipped)&quot; &quot;\n&quot;, &quot;test_memmove_overlapped&quot;, failed, total, passed, skipped); } while (0); } const mos_test_func_t __attribute__((__section__(&quot;.mos.test_cases&quot;))) test_cases_test_memmove_overlapped_L40 = { __mos_test_wrapped_test_test_memmove_overlapped, &quot;test_memmove_overlapped&quot; }; static void test_memmove_overlapped(mos_test_result_t *_MT_result, __attribute__((__unused__)) _Bool *_mt_test_skipped, __attribute__((__unused__)) _Bool *_mt_loop_leave)" data-ref="_M/MOS_TEST_CASE">MOS_TEST_CASE</a>(<a class="decl fn" href="#40" title='test_memmove_overlapped' data-ref="test_memmove_overlapped" data-ref-filename="test_memmove_overlapped"><a class="ref fn" href="#40" title='test_memmove_overlapped' data-ref="test_memmove_overlapped" data-ref-filename="test_memmove_overlapped"><dfn class="decl def fn" id="test_memmove_overlapped" title='test_memmove_overlapped' data-ref="test_memmove_overlapped" data-ref-filename="test_memmove_overlapped">test_memmove_overlapped</dfn></a></a>)</td></tr>
<tr><th id="41">41</th><td>{</td></tr>
<tr><th id="42">42</th><td>    <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> *<dfn class="local col9 decl" id="9src" title='src' data-type='size_t *' data-ref="9src" data-ref-filename="9src">src</dfn> = <a class="ref fn" href="../../kernel/include/mos/mm/kmalloc.h.html#kcalloc" title='kcalloc' data-ref="kcalloc" data-ref-filename="kcalloc">kcalloc</a>(<var>500</var>, <b>sizeof</b>(<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span>));</td></tr>
<tr><th id="43">43</th><td></td></tr>
<tr><th id="44">44</th><td>    <b>for</b> (<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col0 decl" id="10i" title='i' data-type='size_t' data-ref="10i" data-ref-filename="10i">i</dfn> = <var>0</var>; <a class="local col0 ref" href="#10i" title='i' data-ref="10i" data-ref-filename="10i">i</a> &lt; <var>300</var>; <a class="local col0 ref" href="#10i" title='i' data-ref="10i" data-ref-filename="10i">i</a>++)</td></tr>
<tr><th id="45">45</th><td>        <a class="local col9 ref" href="#9src" title='src' data-ref="9src" data-ref-filename="9src">src</a>[<a class="local col0 ref" href="#10i" title='i' data-ref="10i" data-ref-filename="10i">i</a>] = <a class="local col0 ref" href="#10i" title='i' data-ref="10i" data-ref-filename="10i">i</a>;</td></tr>
<tr><th id="46">46</th><td></td></tr>
<tr><th id="47">47</th><td>    <a class="ref fn" href="../../lib/include/lib/string.h.html#memmove" title='memmove' data-ref="memmove" data-ref-filename="memmove">memmove</a>(<a class="local col9 ref" href="#9src" title='src' data-ref="9src" data-ref-filename="9src">src</a> + <var>200</var>, <a class="local col9 ref" href="#9src" title='src' data-ref="9src" data-ref-filename="9src">src</a>, <var>300</var> * <b>sizeof</b>(<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span>));</td></tr>
<tr><th id="48">48</th><td></td></tr>
<tr><th id="49">49</th><td>    <b>for</b> (<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col1 decl" id="11i" title='i' data-type='size_t' data-ref="11i" data-ref-filename="11i">i</dfn> = <var>200</var>; <a class="local col1 ref" href="#11i" title='i' data-ref="11i" data-ref-filename="11i">i</a> &lt; <var>500</var>; <a class="local col1 ref" href="#11i" title='i' data-ref="11i" data-ref-filename="11i">i</a>++)</td></tr>
<tr><th id="50">50</th><td>        <a class="macro" href="../test_engine_impl.h.html#138" title="do { if ((*_mt_test_skipped)) { do { ++_MT_result-&gt;n_total; ++_MT_result-&gt;n_skipped; } while (0); break; } ++_MT_result-&gt;n_total; if ((i - 200) != (src[i])) do { ++_MT_result-&gt;n_failed; mos_test_engine_log(Red, &apos;X&apos;, &quot;line %d: &quot; &quot;&apos;%s&apos; is %d, expected %d&quot; &quot;\n&quot;, 50, &quot;src[i]&quot;, (src[i]), (i - 200)); } while (0); } while (0)" data-ref="_M/MOS_TEST_CHECK">MOS_TEST_CHECK</a>(<a class="local col9 ref" href="#9src" title='src' data-ref="9src" data-ref-filename="9src">src</a>[<a class="local col1 ref" href="#11i" title='i' data-ref="11i" data-ref-filename="11i">i</a>], <a class="local col1 ref" href="#11i" title='i' data-ref="11i" data-ref-filename="11i">i</a> - <var>200</var>);</td></tr>
<tr><th id="51">51</th><td></td></tr>
<tr><th id="52">52</th><td>    <a class="ref fn" href="../../kernel/include/mos/mm/kmalloc.h.html#kfree" title='kfree' data-ref="kfree" data-ref-filename="kfree">kfree</a>(<a class="local col9 ref" href="#9src" title='src' data-ref="9src" data-ref-filename="9src">src</a>);</td></tr>
<tr><th id="53">53</th><td>}</td></tr>
<tr><th id="54">54</th><td></td></tr>
<tr><th id="55">55</th><td><a class="macro" href="../test_engine_impl.h.html#54" title="static void test_memmove_overlapped_backwards(mos_test_result_t *, _Bool *, _Bool *); static void __mos_test_wrapped_test_test_memmove_overlapped_backwards(mos_test_result_t * result) { mos_test_engine_log(LightBlue, &apos;T&apos;, &quot;Starting test &quot; &quot;test_memmove_overlapped_backwards&quot; &quot; (line %d)&quot; &quot;\n&quot;, 55); do { _Bool _mt_test_skipped = 0; _Bool _mt_loop_leave = 0; test_memmove_overlapped_backwards(result, &amp;_mt_test_skipped, &amp;_mt_loop_leave); u32 total = result-&gt;n_total; u32 failed = result-&gt;n_failed; u32 skipped = result-&gt;n_skipped; u32 passed = total - failed - skipped; if (failed == 0) if (skipped == 0) mos_test_engine_log(Green, &apos;\0&apos;, &quot;%s: All %u test(s) passed&quot; &quot;\n&quot;, &quot;test_memmove_overlapped_backwards&quot;, total); else mos_test_engine_log(Green, &apos;\0&apos;, &quot;%s: All %u test(s) passed (%u skipped)&quot; &quot;\n&quot;, &quot;test_memmove_overlapped_backwards&quot;, total, skipped); else mos_test_engine_log(Red, &apos;X&apos;, &quot;%s: %u out of %u test(s) failed (%u passed, %u skipped)&quot; &quot;\n&quot;, &quot;test_memmove_overlapped_backwards&quot;, failed, total, passed, skipped); } while (0); } const mos_test_func_t __attribute__((__section__(&quot;.mos.test_cases&quot;))) test_cases_test_memmove_overlapped_backwards_L55 = { __mos_test_wrapped_test_test_memmove_overlapped_backwards, &quot;test_memmove_overlapped_backwards&quot; }; static void test_memmove_overlapped_backwards(mos_test_result_t *_MT_result, __attribute__((__unused__)) _Bool *_mt_test_skipped, __attribute__((__unused__)) _Bool *_mt_loop_leave)" data-ref="_M/MOS_TEST_CASE">MOS_TEST_CASE</a>(<a class="decl fn" href="#55" title='test_memmove_overlapped_backwards' data-ref="test_memmove_overlapped_backwards" data-ref-filename="test_memmove_overlapped_backwards"><a class="ref fn" href="#55" title='test_memmove_overlapped_backwards' data-ref="test_memmove_overlapped_backwards" data-ref-filename="test_memmove_overlapped_backwards"><dfn class="decl def fn" id="test_memmove_overlapped_backwards" title='test_memmove_overlapped_backwards' data-ref="test_memmove_overlapped_backwards" data-ref-filename="test_memmove_overlapped_backwards">test_memmove_overlapped_backwards</dfn></a></a>)</td></tr>
<tr><th id="56">56</th><td>{</td></tr>
<tr><th id="57">57</th><td>    <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> *<dfn class="local col2 decl" id="12src" title='src' data-type='size_t *' data-ref="12src" data-ref-filename="12src">src</dfn> = <a class="ref fn" href="../../kernel/include/mos/mm/kmalloc.h.html#kcalloc" title='kcalloc' data-ref="kcalloc" data-ref-filename="kcalloc">kcalloc</a>(<var>500</var>, <b>sizeof</b>(<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span>));</td></tr>
<tr><th id="58">58</th><td></td></tr>
<tr><th id="59">59</th><td>    <b>for</b> (<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col3 decl" id="13i" title='i' data-type='size_t' data-ref="13i" data-ref-filename="13i">i</dfn> = <var>0</var>; <a class="local col3 ref" href="#13i" title='i' data-ref="13i" data-ref-filename="13i">i</a> &lt; <var>500</var>; <a class="local col3 ref" href="#13i" title='i' data-ref="13i" data-ref-filename="13i">i</a>++)</td></tr>
<tr><th id="60">60</th><td>        <a class="local col2 ref" href="#12src" title='src' data-ref="12src" data-ref-filename="12src">src</a>[<a class="local col3 ref" href="#13i" title='i' data-ref="13i" data-ref-filename="13i">i</a>] = <a class="local col3 ref" href="#13i" title='i' data-ref="13i" data-ref-filename="13i">i</a>;</td></tr>
<tr><th id="61">61</th><td></td></tr>
<tr><th id="62">62</th><td>    <i>// |  0 -  99 - 100 - 199 - 200 - 299| - 300 - 399 - 400 - 499</i></td></tr>
<tr><th id="63">63</th><td>    <a class="ref fn" href="../../lib/include/lib/string.h.html#memmove" title='memmove' data-ref="memmove" data-ref-filename="memmove">memmove</a>(<a class="local col2 ref" href="#12src" title='src' data-ref="12src" data-ref-filename="12src">src</a>, <a class="local col2 ref" href="#12src" title='src' data-ref="12src" data-ref-filename="12src">src</a> + <var>200</var>, <var>300</var> * <b>sizeof</b>(<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span>));</td></tr>
<tr><th id="64">64</th><td>    <i>// |200 - 299 - 300 - 399 - 400 - 499| - 300 - 399 - 400 - 499</i></td></tr>
<tr><th id="65">65</th><td><i></i></td></tr>
<tr><th id="66">66</th><td><i>    // the front 200 ~ 499 area</i></td></tr>
<tr><th id="67">67</th><td>    <b>for</b> (<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col4 decl" id="14i" title='i' data-type='size_t' data-ref="14i" data-ref-filename="14i">i</dfn> = <var>0</var>; <a class="local col4 ref" href="#14i" title='i' data-ref="14i" data-ref-filename="14i">i</a> &lt; <var>300</var>; <a class="local col4 ref" href="#14i" title='i' data-ref="14i" data-ref-filename="14i">i</a>++)</td></tr>
<tr><th id="68">68</th><td>        <a class="macro" href="../test_engine_impl.h.html#138" title="do { if ((*_mt_test_skipped)) { do { ++_MT_result-&gt;n_total; ++_MT_result-&gt;n_skipped; } while (0); break; } ++_MT_result-&gt;n_total; if ((i + 200) != (src[i])) do { ++_MT_result-&gt;n_failed; mos_test_engine_log(Red, &apos;X&apos;, &quot;line %d: &quot; &quot;&apos;%s&apos; is %d, expected %d&quot; &quot;\n&quot;, 68, &quot;src[i]&quot;, (src[i]), (i + 200)); } while (0); } while (0)" data-ref="_M/MOS_TEST_CHECK">MOS_TEST_CHECK</a>(<a class="local col2 ref" href="#12src" title='src' data-ref="12src" data-ref-filename="12src">src</a>[<a class="local col4 ref" href="#14i" title='i' data-ref="14i" data-ref-filename="14i">i</a>], <a class="local col4 ref" href="#14i" title='i' data-ref="14i" data-ref-filename="14i">i</a> + <var>200</var>);</td></tr>
<tr><th id="69">69</th><td></td></tr>
<tr><th id="70">70</th><td>    <i>// 300 ~ 499 area</i></td></tr>
<tr><th id="71">71</th><td>    <b>for</b> (<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col5 decl" id="15i" title='i' data-type='size_t' data-ref="15i" data-ref-filename="15i">i</dfn> = <var>300</var>; <a class="local col5 ref" href="#15i" title='i' data-ref="15i" data-ref-filename="15i">i</a> &lt; <var>500</var>; <a class="local col5 ref" href="#15i" title='i' data-ref="15i" data-ref-filename="15i">i</a>++)</td></tr>
<tr><th id="72">72</th><td>        <a class="macro" href="../test_engine_impl.h.html#138" title="do { if ((*_mt_test_skipped)) { do { ++_MT_result-&gt;n_total; ++_MT_result-&gt;n_skipped; } while (0); break; } ++_MT_result-&gt;n_total; if ((i) != (src[i])) do { ++_MT_result-&gt;n_failed; mos_test_engine_log(Red, &apos;X&apos;, &quot;line %d: &quot; &quot;&apos;%s&apos; is %d, expected %d&quot; &quot;\n&quot;, 72, &quot;src[i]&quot;, (src[i]), (i)); } while (0); } while (0)" data-ref="_M/MOS_TEST_CHECK">MOS_TEST_CHECK</a>(<a class="local col2 ref" href="#12src" title='src' data-ref="12src" data-ref-filename="12src">src</a>[<a class="local col5 ref" href="#15i" title='i' data-ref="15i" data-ref-filename="15i">i</a>], <a class="local col5 ref" href="#15i" title='i' data-ref="15i" data-ref-filename="15i">i</a>);</td></tr>
<tr><th id="73">73</th><td>    <a class="ref fn" href="../../kernel/include/mos/mm/kmalloc.h.html#kfree" title='kfree' data-ref="kfree" data-ref-filename="kfree">kfree</a>(<a class="local col2 ref" href="#12src" title='src' data-ref="12src" data-ref-filename="12src">src</a>);</td></tr>
<tr><th id="74">74</th><td>}</td></tr>
<tr><th id="75">75</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2023-Jan-07</em> from project MOS<br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
